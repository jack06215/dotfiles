@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

/* === Global Theme Variables ===
   Defines all the color, font, and sizing variables used below.
   Adjust these to quickly restyle the entire theme.
*/
:root {
  --tab-active-bg-color: #111117;
  --tab-inactive-bg-color: #262639;
  --tab-active-fg-fallback-color: #c1c1d1;
  --tab-inactive-fg-fallback-color: #6c6c93;
  --urlbar-focused-bg-color: #262639;
  --urlbar-not-focused-bg-color: #262639;
  --toolbar-bgcolor: #111117 !important;
  --tab-font: "Cozette", monospace;
  --urlbar-font: monospace;
  --tab-private-icon: "P";
  --tab-private-icon-colour: #00ffe0;
  --urlbar-height-setting: 24px;
  --tab-min-height: 20px !important;
  --arrowpanel-menuitem-padding: 2px !important;
  --toolbarbutton-inner-padding: 0px 2px !important;
  --toolbar-field-background-color: var(--urlbar-not-focused-bg-color) !important;
  --toolbar-field-focus-background-color: var(--urlbar-focused-bg-color) !important;
}

/* === Tabs stay visible at top ===
   Removes default top/bottom tab margins and ensures tabs always stay flush at the top.
*/
#titlebar {
  --tab-block-margin: 0px !important;
  --proton-tab-block-margin: 0px !important;
}

/* === Tab Label and Icon Adjustments ===
   Tightens tab label spacing and removes unnecessary padding.
*/
.tabbrowser-tab[selected]:not(:hover):not([pinned]) .tab-label-container,
#tabbrowser-tabs:not([closebuttons="activetab"]) .tabbrowser-tab:not(:hover):not([pinned]) .tab-label-container {
  padding-inline-end: 6px !important;
}
.tab-icon-stack {
  margin-inline-start: auto;
}
.tab-label-container {
  max-width: min-content;
  margin-inline-end: auto;
}

/* === Tabs Toolbar ===
   Sets toolbar color, removes extra padding, and reduces tab height.
*/
#TabsToolbar {
  background-color: var(--toolbar-bgcolor) !important;
  min-height: var(--tab-min-height) !important;
  padding-block: 0 !important;
  margin: 0 !important;
  border: none !important;
}

/* === Disable Autohide/Slide Animations ===
   Prevents Firefox UI elements from sliding or fading on hover.
*/
#navigator-toolbox,
#nav-bar,
#PersonalToolbar {
  transform: none !important;
  transition: none !important;
  margin-bottom: 0 !important;
}

/* === Toolbar Styling ===
   Simplifies toolbar background and removes borders for a clean look.
*/
#navigator-toolbox {
  border: none !important;
  background: var(--toolbar-bgcolor) !important;
}

#nav-bar {
  background: var(--toolbar-bgcolor) !important;
  min-height: var(--urlbar-height-setting) !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* === URL Bar Container ===
   Minimizes padding and sets consistent height and font for URL bar.
*/
#urlbar-container {
  --urlbar-container-height: var(--urlbar-height-setting) !important;
  padding: 0 !important;
  margin: 0 !important;
  font-family: var(--urlbar-font);
  font-size: 11px;
}

/* === URL Bar Field ===
   Removes borders and uses the same background color when unfocused.
*/
#urlbar {
  --urlbar-height: var(--urlbar-height-setting) !important;
  background-color: var(--urlbar-not-focused-bg-color) !important;
  border: none !important;
  min-height: var(--urlbar-height-setting) !important;
}

/* === URL Bar Input Text ===
   Sets white text and tighter margins inside the address bar.
*/
#urlbar-input {
  color: #fff !important;
  margin: 0.5em !important;
}

/* === Tabs Appearance ===
   Defines colors, fonts, and hover behavior for tabs.
*/
.tabbrowser-tab {
  min-height: var(--tab-min-height) !important;
  background-color: var(--tab-inactive-bg-color) !important;
  color: var(--tab-inactive-fg-fallback-color) !important;
  font-family: var(--tab-font);
  border: none !important;
  padding-inline: 6px !important;
}

/* === Active Tab ===
   Highlights the selected tab with brighter text and topmost z-index.
*/
.tabbrowser-tab[selected] {
  background-color: var(--tab-active-bg-color) !important;
  color: var(--tab-active-fg-fallback-color) !important;
  z-index: 2 !important;
}

/* === Hovered Tab ===
   Slightly brightens inactive tabs on hover.
*/
.tabbrowser-tab:hover:not([selected]) {
  background-color: #1c1c28 !important;
}

/* === Hide Tab Close Buttons ===
   Keeps interface clean by hiding close icons unless pinned.
*/
.tabbrowser-tab .tab-close-button { display: none !important; }

/* === Hide Tab Favicons ===
   Removes site icons from tabs unless they are pinned.
*/
.tab-icon-stack:not([pinned]) { display: none !important; }

/* === Remove Tab Shadows & Titlebar Buttons */
#tabbrowser-tabs:not([noshadowfortests]) .tab-background {
  box-shadow: none !important;
}
.titlebar-spacer,
.titlebar-buttonbox-container { display: none !important; }

/* Hides navigation and extra toolbar buttons. */
#back-button,
#forward-button,
#reload-button,
#stop-button,
#home-button,
#library-button,
#fxa-toolbar-menu-button,
#customizableui-special-spring1,
#customizableui-special-spring2 {
  display: none !important;
}

/*  Simplifies extension popup menu by removing headers and footers. */
#unified-extensions-view {
  --uei-icon-size: 12px !important;
}
.unified-extensions-item-message-deck,
#unified-extensions-view > .panel-header,
#unified-extensions-view > toolbarseparator,
#unified-extensions-manage-extensions {
  display: none !important;
}

/* Adds indicator on the active tab when in private mode. */
#private-browsing-indicator-with-label { display: none !important; }
#main-window[privatebrowsingmode] .tabbrowser-tab[selected] .tab-content::before {
  content: var(--tab-private-icon);
  color: var(--tab-private-icon-colour);
  margin-right: 0.5em;
}

/* Moves the status panel to the lower-left corner with custom styling. */
#statuspanel {
  position: fixed !important;
  bottom: 1vh !important;
  left: 1vw !important;
  background: #111117 !important;
  border: none !important;
  color: #c1c1d1 !important;
  font-size: 10px !important;
  max-width: 50% !important;
}

/* Creates a colorful animated border around active tab */
@keyframes filter{from{ filter: hue-rotate(0deg) } to { filter: hue-rotate(360deg) }}
.tabbrowser-tab[selected] > .tab-stack::before{
  grid-area: 1/1;
  content: "";
  display: inherit;
  margin-block: var(--tab-block-margin);
  border-radius: var(--tab-border-radius);
  z-index: 0;
  background-image: conic-gradient(
    hsl(0 100% 70%),
    hsl(60 100% 45%) 70deg,
    hsl(120 100% 55%) 105deg,
    hsl(160 100% 60%) 160deg,
    hsl(200 100% 60%) 200deg,
    hsl(240 100% 65%) 255deg,
    hsl(300 100% 60%) 290deg,
    hsl(360 100% 70%) 360deg);
  mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8cmVjdCB4PSIwIiB5PSIwIiByeD0iNCIgc3Ryb2tlPSJyZWQiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIgdmVjdG9yLWVmZmVjdD0ibm9uLXNjYWxpbmctc3Ryb2tlIi8+DQo8L3N2Zz4");
  background-size: cover;
  background-position: center;
  animation: filter steps(30) 2s infinite;
  
}
.tab-background[selected]{
  border: 1px solid transparent !important;
  outline: none !important;
  background-clip: padding-box !important;
}
